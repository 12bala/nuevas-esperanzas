# The source data is in CSV files, so we use the 'csv' source plugin.
id: profile
label: Migrate Csv Profile
migration_tags:
  - CSV
source:
  plugin: csv
  # Full path to the file.
  path: public://csv/profile.csv
  # The number of rows at the beginning which are not data.
  header_row_count: 1

  # These are the field names from the source file representing the key
  # uniquely identifying each game - they will be stored in the migration
  # map table as columns sourceid1, sourceid2, and sourceid3.
  keys:
    - id
  # Here we identify the columns of interest in the source file. Each numeric
  # key is the 0-based index of the column. For each column, the key below
  # (e.g., "start_date") is the field name assigned to the data on import, to
  # be used in field mappings below. The value is a user-friendly string for
  # display by the migration UI.
  column_names:
    # So, here we're saying that the first field (index 0) on each line will
    # be stored in the start_date field in the Row object during migration, and
    # that name can be used to map the value below. "Date of game" will appear
    # in the UI to describe this field.
   
      0:
        id: Profile ID
      1:
        first_name: First Names

      2:
        last_name: Last Names

      3:
        other_event: Other event

      4:
        pictures: Pictures

      5:
        birthday: Birthday

      6:
        age: Age

      7:
        no_cedula: No. de Cedula

      8:
        marital_status: Marital status

      9:
        household_income: Household Income

      10:
        children: Children

      11:
        people_in_home: No. of People in Home

      12:
        current_employment: Current Employment

      13:
        salary: Salary

      14:
        telefono: Telefono

      15:
        highest_education_completed: Highest Education Completed

      16:
        read_write_math: Read Write Math

      17:
        special_skills: Special Skills

      18:
        job_training: Job Training

      19:
        languages: Languages


destination:
  # Here we're saying that each row of data (line from the CSV file) will be
  # used to create a node entity.
  plugin: entity:node
process:
  # The content (node) type we are creating is 'profile'.
  type:
    plugin: default_value
    default_value: profile
  # Most fields can be mapped directly - we just specify the destination (D8)
  # field and the corresponding field name from above, and the values will be
  # copied in.
  title: first_name

  field_first_name: first_name

  field_last_name: last_name

  field_other_event: other_event

#  field_pictures : pictures

  field_birthday : birthday

  #field_age : age

  field_cedule_number: no_cedula

  field_marital_status:
    -
      plugin: static_map
      bypass: TRUE
      map:
        '': NULL
      source: marital_status
    -
      plugin: skip_on_empty
      method: process
    -
      plugin: migration
      migration: marital_status

  field_household_income: household_income

  field_children: children

  field_number_of_people_in_home: people_in_home

  field_current_employment: current_employment

  field_salary: salary

  field_telephone: telefono

  field_highest_education_complete:
    -
      plugin: static_map
      bypass: TRUE
      map:
        '': NULL
      source: highest_education_completed
    -
      plugin: skip_on_empty
      method: process
    -
      plugin: migration
      migration: highest_level_education

  field_read_write_math:
    -
      plugin: static_map
      bypass: TRUE
      map:
        '': NULL
      source: read_write_math
    -
      plugin: skip_on_empty
      method: process
    -
      plugin: migration
      migration: read_write_math

  field_special_skills:
    -
      plugin: static_map
      bypass: TRUE
      map:
        '': NULL
      source: special_skills
    -
      plugin: skip_on_empty
      method: process
    -
      plugin: migration
      migration: special_skills

  field_job_training:
    -
      plugin: static_map
      bypass: TRUE
      map:
        '': NULL
      source: job_training
    -
      plugin: skip_on_empty
      method: process
    -
      plugin: migration
      migration: job_training

  field_languages:
    -
      plugin: static_map
      bypass: TRUE
      map:
        '': NULL
      source: languages
    -
      plugin: skip_on_empty
      method: process
    -
      plugin: migration
      migration: languages

#migration_dependencies:
#  required:
#    - job_training
#    - read_write_math
#    - languages
#    - highest_level_education
#    - marital_status
#    - special_skills
